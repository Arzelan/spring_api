<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<title>5.3.&#160;从错误代码到错误信息</title>
<link rel="stylesheet" href="styles/html.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.71.0">
<link rel="start" href="index.html" title="Spring Framework 开发参考手册">
<link rel="up" href="ch05.html" title="第&#160;5&#160;章&#160;校验，数据绑定，BeanWrapper，与属性编辑器">
<link rel="prev" href="ch05s02.html" title="5.2.&#160;使用Spring的Validator接口进行校验">
<link rel="next" href="ch05s04.html" title="5.4.&#160;Bean处理和BeanWrapper">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="validation-conversion"></a>5.3.&#160;从错误代码到错误信息</h2></div></div></div>
<p>我们已经讨论了数据绑定和校验。最后我们来讨论一下与校验错误相对应的错误信息输出。在先前的示例中，我们对<code class="literal">name</code>和<code class="literal">age</code>字段进行了校验并发现了错误。如果我们想用<code class="literal">MessageSource</code>来输出错误信息，当某个字段校验出错时（在这个例子中是name和age）我们输出的是错误代码。无论你直接或者间接使用示例中的<code class="classname">ValidationUtils</code> 类来调用<code class="interfacename">Errors</code>接口中<code class="literal">rejectValue</code>方法或者任何一个其它的<code class="literal">reject</code>方法，底层的实现不仅为你注册了你传入的代码，还同时为你注册了许多额外的错误代码信息。而你使用的<code class="interfacename">MessageCodesResolver</code>将决定究竟注册什么样的错误代码。默认情况下，将会使用<code class="classname">DefaultMessageCodesResolver</code>。回到前面的例子，使用<code class="literal">DefaultMessageCodesResolver</code>，不仅会为你注册你提供的错误代码信息，同时还包含了你传入到reject方法中的字段信息。所以在这个例子中，你通过<code class="literal">rejectValue("age", "too.darn.old")</code>来注册一个字段校验错误。Spring不仅为你注册了<code class="literal">too.darn.old</code>这个代码，同时还为你注册了<code class="literal">too.darn.old.age</code>和<code class="literal">too.darn.old.age.int</code>来分别表示字段名称和字段的类型。这种是现实为了方面开发者来定位错误信息。</p>
<p>
			更多有关<code class="interfacename">MessageCodesResolver</code>的信息以及默认的策略可以在线访问相应的JavaDocs：
			<a href="http://www.springframework.org/docs/api/org/springframework/validation/MessageCodesResolver.html" target="_top">				MessageCodesResolver
			</a> 和
			<a href="http://www.springframework.org/docs/api/org/springframework/validation/DefaultMessageCodesResolver.html" target="_top">				DefaultMessageCodesResolver
			</a>. 
		</p>
</div></body>
</html>
